---
layout: post
title: Mapping Memory to concrete form
date: 2015-06-30
---

If you have a struct like the following, could you predict its size?

<pre>
struct human {
    char *name,     /* 8 bytes */
    char c,         /* 1 byte  */
    int age         /* 4 bytes */
};
</pre>

To answer this question, a knowledge of how the memory is represendted internally, and 
how they are accessed is neccessary. 

With arrays, it is trivial to know its size and how to access the elements individually. Assuming an int is 32 bits.
an array of integers with 10 elements would have:

(4) * 10 = 40 Bytes

Memory representation:
byte addressable

an int of 1 would have two options:

Little enddian:
<pre>
x01 00000001
x02 00000000
x03 00000000
x04 00000000
</pre>
Big enddian:
<pre>
x01 00000000
x02 00000000
x03 00000000
x04 00000001
</pre>

- Alignment:

Additional bytes are inserted by the compiler to make the data elements aligned to word-size of the CPU.
Aligning the data elements to the word-size of the CPU by the compiler.

each type except char has an alignment 

structs padding

Pahole is a utility program that could inform you about your data structres:

Example:
<pre>

</pre>

Refrences:
http://www.geeksforgeeks.org/structure-member-alignment-padding-and-data-packing/

http://www.catb.org/esr/structure-packing/

https://en.wikipedia.org/wiki/Data_structure_alignment

http://everburning.com/news/stuffing-my-pahole/
